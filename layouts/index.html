{{ define "main" }}
{{/*
Homepage Template for IOGKF Dojo Website

This template creates the main landing page with:
- Hero section with dojo logo and name
- Welcome message and call-to-action buttons
- Quick info section with contact details
- Schedule overview and instructor highlights

Data Sources:
- data/{lang}/dojo.yaml: Basic dojo information
- data/{lang}/schedule.yaml: Class schedule
- data/{lang}/instructors.yaml: Instructor list
- static/images/logo.png: Dojo logo
- static/images/hero.jpg: Background image (optional)
*/}}

{{/* Get dojo data from language-specific YAML file */}}
{{ $dojo := index .Site.Data .Site.Language.Lang "dojo" }}

{{/* Hero Section with background image, logo, and dojo name */}}
<div class="cover bg-center"
  style="background-image: url('{{ .Site.BaseURL }}images/hero.jpg'); background-size: cover; background-position: center;">
  <div class="bg-black-60">
    <div class="tc-l pv6 ph3 ph4-ns">
      {{/*
      IOGKF/Dojo Logo Display
      - Looks for logo.png in static/images/
      - Uses .Site.BaseURL for GitHub Pages compatibility
      - Fallback to site title if no logo
      */}}
      <div class="mb4">
        <img src="{{ .Site.BaseURL }}images/logo.png" alt="IOGKF Logo" class="center db"
          style="max-height: 120px; max-width: 300px;">
      </div>

      {{/*
      Dojo Name Display
      - Primary source: dojo.yaml -> dojo_name
      - Fallback: hugo.toml -> title
      */}}
      {{ if $dojo.dojo_name }}
      <div class="f2 f1-l fw6 white-90 mb0 lh-title">{{ $dojo.dojo_name }}</div>
      {{ else }}
      <div class="f2 f1-l fw6 white-90 mb0 lh-title">{{ .Site.Title }}</div>
      {{ end }}

      {{/*
      Welcome Message
      - Primary source: dojo.yaml -> description
      - Fallback: i18n translation file
      */}}
      <div class="fw4 f5 f3-l white-90 measure-wide-l center lh-copy mt3 mb4">
        {{ if $dojo.description }}
        {{ $dojo.description }}
        {{ else }}
        {{ i18n "welcome_message" }}
        {{ end }}
      </div>

      {{/*
      Call-to-Action Buttons
      - Links use relLangURL for multi-language support
      - Text from i18n translation files
      */}}
      <div class="mt4">
        <a href="{{ "contact" | relLangURL }}" class="f6 link dim br3 ph3 pv2 mb2 dib white bg-red mr3">{{ i18n
          "contact_us" }}</a>
        <a href="{{ "schedule" | relLangURL }}"
          class="f6 link dim br3 ph3 pv2 mb2 dib black bg-light-gray ba b--gray">{{ i18n "view_schedule" }}</a>
      </div>
    </div>
  </div>
</div>

{{/*
Main Content Section
- Displays markdown content from _index.md
- Clean typography with proper spacing
- Better use of available space
*/}}
<article class="cf ph3 ph5-l pv3 pv4-l f4 tc-l center measure-wide lh-copy mid-gray">
  {{ .Content }}

  {{/*
  Contact Information Section
  - Simple, clean layout without card styling
  - Better use of available space
  - Proper font sizes and spacing
  - UX-optimized colors: red for primary elements, black/gray for text
  */}}
  {{ if $dojo }}
  <div class="mt5 pt4 bt b--light-gray">
    <h3 class="f3 fw6 mb4 tc red">{{ i18n "visit_our_dojo" }}</h3>
    <div class="cf">
      {{ if $dojo.address }}
      <div class="fl w-100 w-third-ns pr3-ns mb3">
        <h4 class="f5 fw6 mb2 black">üìç {{ i18n "location" }}</h4>
        <p class="f6 ma0 lh-copy gray">{{ $dojo.address | markdownify }}</p>
      </div>
      {{ end }}

      {{ if $dojo.phone }}
      <div class="fl w-100 w-third-ns ph3-ns mb3">
        <h4 class="f5 fw6 mb2 black">üìû {{ i18n "phone" }}</h4>
        <p class="f6 ma0"><a href="tel:{{ $dojo.phone }}" class="link red hover-dark-red">{{ $dojo.phone }}</a></p>
      </div>
      {{ end }}

      {{ if $dojo.email }}
      <div class="fl w-100 w-third-ns pl3-ns mb3">
        <h4 class="f5 fw6 mb2 black">‚úâÔ∏è {{ i18n "email" }}</h4>
        <p class="f6 ma0"><a href="mailto:{{ $dojo.email }}" class="link red hover-dark-red">{{ $dojo.email }}</a></p>
      </div>
      {{ end }}
    </div>
  </div>
  {{ end }}
</article>
{{ end }}